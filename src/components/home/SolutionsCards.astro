---
/**
 * SolutionsCards Component
 * Displays 6 packaged solutions in a responsive grid.
 * Architecture: Zero JS, 100% Tailwind, WCAG 2.2 AA, i18n compliant.
 * Section: #5 of Home
 */
import { t } from "astro-i18n";

interface Props {
  locale?: "en" | "es" | "fr";
}

const { locale = "en" } = Astro.props;

// Build URL helper for CTAs, respecting the current language
const getUrl = (path: string) => {
  return locale === "en" ? path : `/${locale}${path}`;
};

const solutions = [
  {
    titleKey: "home.solutions.regulatoryBackup.title",
    descriptionKey: "home.solutions.regulatoryBackup.description",
    features: [
      "home.solutions.regulatoryBackup.feature1",
      "home.solutions.regulatoryBackup.feature2",
      "home.solutions.regulatoryBackup.feature3",
    ],
    urlPath: "/soluciones/regulatory-backup",
    icon: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="white" class="h-10 w-10"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3l7.5 4.5v5.25c0 5.25-3.75 9.75-7.5 9.75S4.5 18 4.5 12.75V7.5L12 3z"></path><circle cx="12" cy="12" r="3" stroke="white" stroke-width="1.5" fill="none"></circle></svg>`,
    iconBgClass: "from-green-600 to-teal-400",
  },
  {
    titleKey: "home.solutions.kubernetes.title",
    descriptionKey: "home.solutions.kubernetes.description",
    features: [
      "home.solutions.kubernetes.feature1",
      "home.solutions.kubernetes.feature2",
      "home.solutions.kubernetes.feature3",
    ],
    urlPath: "/soluciones/kubernetes",
    icon: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="white" class="h-10 w-10"><path stroke-linecap="round" stroke-linejoin="round" d="M21 7.5V17a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 17V7.5m18 0A2.25 2.25 0 0018.75 5.25H5.25A2.25 2.25 0 003 7.5m18 0v.75a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 8.25v-.75m0 0V17m0-9.5h18"></path></svg>`,
    iconBgClass: "from-blue-600 to-blue-400",
  },
  {
    titleKey: "home.solutions.nocaas.title",
    descriptionKey: "home.solutions.nocaas.description",
    features: [
      "home.solutions.nocaas.feature1",
      "home.solutions.nocaas.feature2",
      "home.solutions.nocaas.feature3",
    ],
    urlPath: "/solutions/nocaas",
    icon: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="white" class="h-10 w-10"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 4.5h16.5a.75.75 0 01.75.75v13.5a.75.75 0 01-.75.75H3.75a.75.75 0 01-.75-.75V5.25a.75.75 0 01.75-.75zm0 0V3a.75.75 0 01.75-.75h15a.75.75 0 01.75.75v1.5"></path></svg>`,
    iconBgClass: "from-yellow-400 to-orange-300",
  },
  {
    titleKey: "home.solutions.multicloud.title",
    descriptionKey: "home.solutions.multicloud.description",
    features: [
      "home.solutions.multicloud.feature1",
      "home.solutions.multicloud.feature2",
      "home.solutions.multicloud.feature3",
    ],
    urlPath: "/soluciones/multicloud",
    icon: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="white" class="h-10 w-10"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3l7.5 4.5v5.25c0 5.25-3.75 9.75-7.5 9.75S4.5 18 4.5 12.75V7.5L12 3z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M9.75 12.75l2.25 2.25 3-3"></path></svg>`,
    iconBgClass: "from-purple-600 to-pink-400",
  },
  {
    titleKey: "home.solutions.privateCloud.title",
    descriptionKey: "home.solutions.privateCloud.description",
    features: [
      "home.solutions.privateCloud.feature1",
      "home.solutions.privateCloud.feature2",
      "home.solutions.privateCloud.feature3",
    ],
    urlPath: "/solutions/private-cloud-service",
    icon: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="white" class="h-10 w-10"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 16.5a4.5 4.5 0 01.75-8.94A6 6 0 0118 9.75a4.5 4.5 0 01-1.5 8.75H7.5a.75.75 0 01-.75-.75z"></path></svg>`,
    iconBgClass: "from-indigo-500 to-purple-400",
  },
  {
    titleKey: "home.solutions.aiMl.title",
    descriptionKey: "home.solutions.aiMl.description",
    features: [
      "home.solutions.aiMl.feature1",
      "home.solutions.aiMl.feature2",
      "home.solutions.aiMl.feature3",
    ],
    urlPath: "/soluciones/ai-ml",
    icon: `<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="white" class="h-10 w-10"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2m0 14v2m9-9h-2M5 12H3m15.364-6.364l-1.414 1.414M6.05 17.95l-1.414 1.414m12.728 0l-1.414-1.414M6.05 6.05L4.636 4.636"></path></svg>`,
    iconBgClass: "from-rose-500 to-red-600",
  },
];
---

<section class="py-20 bg-gray-50" aria-labelledby="solutions-heading">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Section Header -->
    <div class="text-center max-w-3xl mx-auto mb-16">
      <h2
        id="solutions-heading"
        class="text-3xl font-extrabold text-gray-900 sm:text-4xl"
      >
        {t("home.solutions.title", undefined, { locale })}
      </h2>
      <p class="mt-4 text-xl text-gray-600">
        {t("home.solutions.subtitle", undefined, { locale })}
      </p>
    </div>

    <!-- Solutions Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {
        solutions.map((solution) => (
          <article class="relative flex flex-col bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow duration-300">
            <div class="p-8 flex-grow">
              <div class="flex items-center mb-4">
                <span
                  class:list={[
                    "inline-flex items-center justify-center h-16 w-16 bg-gradient-to-br clip-hexagon rounded-xl shadow-lg",
                    solution.iconBgClass,
                  ]}
                  aria-hidden="true"
                >
                  <Fragment set:html={solution.icon} />
                </span>
                <h3 class="ml-4 text-2xl font-semibold text-gray-900">
                  {t(solution.titleKey, undefined, { locale })}
                </h3>
              </div>
              <p class="text-base text-gray-600 mb-6">
                {t(solution.descriptionKey, undefined, { locale })}
              </p>
              <ul class="space-y-3 mb-6">
                {solution.features.map((featureKey) => (
                  <li class="flex items-start">
                    <svg
                      class="h-5 w-5 text-green-500 mt-0.5 flex-shrink-0"
                      fill="currentColor"
                      viewBox="0 0 20 20"
                      aria-hidden="true"
                    >
                      <path
                        fill-rule="evenodd"
                        d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                        clip-rule="evenodd"
                      />
                    </svg>
                    <span class="ml-3 text-sm text-gray-700">
                      {t(featureKey, undefined, { locale })}
                    </span>
                  </li>
                ))}
              </ul>
            </div>
            <div class="p-8 pt-0 mt-auto">
              <a
                href={getUrl(solution.urlPath)}
                class="inline-flex items-center text-orange-500 hover:text-orange-600 font-medium transition-colors duration-200"
              >
                {t("home.solutions.cta", undefined, { locale })}
                <svg
                  class="ml-2 h-5 w-5"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  aria-hidden="true"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M17 8l4 4m0 0l-4 4m4-4H3"
                  />
                </svg>
              </a>
            </div>
          </article>
        ))
      }
    </div>
  </div>
</section>