---
/**
 * MulticloudDiagram Component
 * Displays multi-cloud architecture diagram with "Living Network" animations
 * Architecture: Zero JS, 100% Tailwind, inline SVG, CSS-only animations
 * Section: #7 of Home
 */

import { t } from "astro-i18n";

interface Props {
  locale?: "en" | "es" | "fr";
}

const { locale = "en" } = Astro.props;
---

<section
  class="py-24 bg-gray-900 text-white relative overflow-hidden"
  aria-labelledby="multicloud-heading"
>
  <!-- Background Elements -->
  <div
    class="absolute inset-0 bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-gray-800 via-gray-900 to-black opacity-50 pointer-events-none"
  >
  </div>
  <div
    class="absolute top-0 left-0 w-full h-full bg-[url('/images/grid-pattern.svg')] opacity-5 pointer-events-none"
  >
  </div>

  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
    <!-- Section Header -->
    <div class="text-center max-w-3xl mx-auto mb-20">
      <h2
        id="multicloud-heading"
        class="text-4xl md:text-5xl font-light mb-6 tracking-tight"
      >
        {t("home.multicloud.title", undefined, { locale })}
      </h2>
      <p class="text-xl text-gray-400 font-light">
        {t("home.multicloud.subtitle", undefined, { locale })}
      </p>
    </div>

    <!-- Diagram Container -->
    <div class="max-w-6xl mx-auto mb-20">
      <div class="relative aspect-[16/9] md:aspect-[21/9] w-full">
        <!-- SVG Diagram -->
        <svg
          viewBox="0 0 1000 500"
          class="w-full h-full drop-shadow-2xl"
          role="img"
          aria-label={t("home.multicloud.diagram_alt", undefined, { locale })}
        >
          <defs>
            <!-- Gradients -->
            <linearGradient id="grad-aws" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#FF9900;stop-opacity:1"
              ></stop>
              <stop offset="100%" style="stop-color:#FFC46D;stop-opacity:1"
              ></stop>
            </linearGradient>
            <linearGradient id="grad-azure" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#0078D4;stop-opacity:1"
              ></stop>
              <stop offset="100%" style="stop-color:#50E6FF;stop-opacity:1"
              ></stop>
            </linearGradient>
            <linearGradient id="grad-gcp" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#4285F4;stop-opacity:1"
              ></stop>
              <stop offset="100%" style="stop-color:#34A853;stop-opacity:1"
              ></stop>
            </linearGradient>
            <linearGradient
              id="grad-onprem"
              x1="0%"
              y1="0%"
              x2="100%"
              y2="100%"
            >
              <stop offset="0%" style="stop-color:#10B981;stop-opacity:1"
              ></stop>
              <stop offset="100%" style="stop-color:#34D399;stop-opacity:1"
              ></stop>
            </linearGradient>
            <linearGradient id="grad-ignia" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" style="stop-color:#F36B1C;stop-opacity:1"
              ></stop>
              <stop offset="100%" style="stop-color:#FB923C;stop-opacity:1"
              ></stop>
            </linearGradient>

            <!-- Glow Filter -->
            <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
              <feGaussianBlur stdDeviation="4" result="coloredBlur"
              ></feGaussianBlur>
              <feMerge>
                <feMergeNode in="coloredBlur"></feMergeNode>
                <feMergeNode in="SourceGraphic"></feMergeNode>
              </feMerge>
            </filter>
          </defs>

          <!-- Connection Lines (Animated) -->
          <g class="connections" stroke-width="2" fill="none">
            <!-- AWS Path -->
            <path
              d="M500 250 L200 120"
              stroke="url(#grad-aws)"
              stroke-opacity="0.3"></path>
            <path
              d="M500 250 L200 120"
              stroke="url(#grad-aws)"
              stroke-dasharray="10,10"
              class="animate-flow"></path>

            <!-- Azure Path -->
            <path
              d="M500 250 L800 120"
              stroke="url(#grad-azure)"
              stroke-opacity="0.3"></path>
            <path
              d="M500 250 L800 120"
              stroke="url(#grad-azure)"
              stroke-dasharray="10,10"
              class="animate-flow"></path>

            <!-- GCP Path -->
            <path
              d="M500 250 L200 380"
              stroke="url(#grad-gcp)"
              stroke-opacity="0.3"></path>
            <path
              d="M500 250 L200 380"
              stroke="url(#grad-gcp)"
              stroke-dasharray="10,10"
              class="animate-flow-reverse"></path>

            <!-- On-Prem Path -->
            <path
              d="M500 250 L800 380"
              stroke="url(#grad-onprem)"
              stroke-opacity="0.3"></path>
            <path
              d="M500 250 L800 380"
              stroke="url(#grad-onprem)"
              stroke-dasharray="10,10"
              class="animate-flow-reverse"></path>
          </g>

          <!-- Nodes -->
          <!-- AWS Node -->
          <g class="node hover-scale" style="transform-origin: 200px 120px">
            <circle
              cx="200"
              cy="120"
              r="60"
              fill="#1F2937"
              stroke="url(#grad-aws)"
              stroke-width="2"
              fill-opacity="0.8"></circle>
            <text
              x="200"
              y="115"
              text-anchor="middle"
              fill="#FF9900"
              font-size="18"
              font-weight="bold"
              font-family="sans-serif">AWS</text
            >
            <text
              x="200"
              y="140"
              text-anchor="middle"
              fill="#9CA3AF"
              font-size="12"
              font-family="sans-serif">Direct Connect</text
            >
          </g>

          <!-- Azure Node -->
          <g class="node hover-scale" style="transform-origin: 800px 120px">
            <circle
              cx="800"
              cy="120"
              r="60"
              fill="#1F2937"
              stroke="url(#grad-azure)"
              stroke-width="2"
              fill-opacity="0.8"></circle>
            <text
              x="800"
              y="115"
              text-anchor="middle"
              fill="#0078D4"
              font-size="18"
              font-weight="bold"
              font-family="sans-serif">Azure</text
            >
            <text
              x="800"
              y="140"
              text-anchor="middle"
              fill="#9CA3AF"
              font-size="12"
              font-family="sans-serif">ExpressRoute</text
            >
          </g>

          <!-- GCP Node -->
          <g class="node hover-scale" style="transform-origin: 200px 380px">
            <circle
              cx="200"
              cy="380"
              r="60"
              fill="#1F2937"
              stroke="url(#grad-gcp)"
              stroke-width="2"
              fill-opacity="0.8"></circle>
            <text
              x="200"
              y="375"
              text-anchor="middle"
              fill="#4285F4"
              font-size="18"
              font-weight="bold"
              font-family="sans-serif">GCP</text
            >
            <text
              x="200"
              y="400"
              text-anchor="middle"
              fill="#9CA3AF"
              font-size="12"
              font-family="sans-serif">Cloud Interconnect</text
            >
          </g>

          <!-- On-Prem Node -->
          <g class="node hover-scale" style="transform-origin: 800px 380px">
            <circle
              cx="800"
              cy="380"
              r="60"
              fill="#1F2937"
              stroke="url(#grad-onprem)"
              stroke-width="2"
              fill-opacity="0.8"></circle>
            <text
              x="800"
              y="375"
              text-anchor="middle"
              fill="#10B981"
              font-size="18"
              font-weight="bold"
              font-family="sans-serif">On-Prem</text
            >
            <text
              x="800"
              y="400"
              text-anchor="middle"
              fill="#9CA3AF"
              font-size="12"
              font-family="sans-serif">VPN / MPLS</text
            >
          </g>

          <!-- Central Hub (Ignia) -->
          <g
            class="hub animate-pulse-slow"
            style="transform-origin: 500px 250px"
          >
            <circle
              cx="500"
              cy="250"
              r="90"
              fill="url(#grad-ignia)"
              fill-opacity="0.1"
              filter="url(#glow)"></circle>
            <circle
              cx="500"
              cy="250"
              r="70"
              fill="#1F2937"
              stroke="url(#grad-ignia)"
              stroke-width="3"></circle>
            <image
              href="/logo.svg"
              x="460"
              y="225"
              width="80"
              height="40"
              preserveAspectRatio="xMidYMid meet"
            />
            <text
              x="500"
              y="270"
              text-anchor="middle"
              fill="#F36B1C"
              font-size="14"
              font-family="sans-serif">Unified Backbone</text
            >
          </g>
        </svg>
      </div>
    </div>

    <!-- Features Grid -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
      <!-- Feature 1 -->
      <div
        class="group p-6 rounded-2xl bg-gray-800/50 border border-gray-700 hover:border-orange-500/50 transition-colors duration-300"
      >
        <div
          class="w-12 h-12 rounded-lg bg-orange-500/10 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300"
        >
          <svg
            class="w-6 h-6 text-orange-500"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M13 10V3L4 14h7v7l9-11h-7z"></path>
          </svg>
        </div>
        <h3 class="text-xl font-semibold mb-2 text-white">
          {t("home.multicloud.feature1_title", undefined, { locale })}
        </h3>
        <p class="text-gray-400 text-sm leading-relaxed">
          {t("home.multicloud.feature1_description", undefined, { locale })}
        </p>
      </div>

      <!-- Feature 2 -->
      <div
        class="group p-6 rounded-2xl bg-gray-800/50 border border-gray-700 hover:border-blue-500/50 transition-colors duration-300"
      >
        <div
          class="w-12 h-12 rounded-lg bg-blue-500/10 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300"
        >
          <svg
            class="w-6 h-6 text-blue-500"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"
            ></path>
          </svg>
        </div>
        <h3 class="text-xl font-semibold mb-2 text-white">
          {t("home.multicloud.feature2_title", undefined, { locale })}
        </h3>
        <p class="text-gray-400 text-sm leading-relaxed">
          {t("home.multicloud.feature2_description", undefined, { locale })}
        </p>
      </div>

      <!-- Feature 3 -->
      <div
        class="group p-6 rounded-2xl bg-gray-800/50 border border-gray-700 hover:border-green-500/50 transition-colors duration-300"
      >
        <div
          class="w-12 h-12 rounded-lg bg-green-500/10 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300"
        >
          <svg
            class="w-6 h-6 text-green-500"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"
            ></path>
          </svg>
        </div>
        <h3 class="text-xl font-semibold mb-2 text-white">
          {t("home.multicloud.feature3_title", undefined, { locale })}
        </h3>
        <p class="text-gray-400 text-sm leading-relaxed">
          {t("home.multicloud.feature3_description", undefined, { locale })}
        </p>
      </div>
    </div>
  </div>
</section>

<style>
  /* Animations */
  @keyframes flow {
    to {
      stroke-dashoffset: -20;
    }
  }

  @keyframes flow-reverse {
    to {
      stroke-dashoffset: 20;
    }
  }

  @keyframes pulse-slow {
    0%,
    100% {
      transform: scale(1);
      opacity: 1;
    }
    50% {
      transform: scale(1.05);
      opacity: 0.9;
    }
  }

  .animate-flow {
    animation: flow 1s linear infinite;
  }

  .animate-flow-reverse {
    animation: flow-reverse 1s linear infinite;
  }

  .animate-pulse-slow {
    animation: pulse-slow 4s ease-in-out infinite;
  }

  .hover-scale {
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
  }

  .hover-scale:hover {
    transform: scale(1.1);
  }

  /* Accessibility: Reduced Motion */
  @media (prefers-reduced-motion: reduce) {
    .animate-flow,
    .animate-flow-reverse,
    .animate-pulse-slow,
    .hover-scale {
      animation: none;
      transition: none;
    }
  }
</style>
