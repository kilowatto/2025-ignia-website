---
import BaseLayout from './BaseLayout.astro';
import { t } from 'astro-i18n';

interface Props {
  titleKey: string;
  descriptionKey: string;
  canonicalKey?: string;
  ogImage?: string;
  structuredData?: Record<string, unknown>[];
}

const {
  titleKey,
  descriptionKey,
  canonicalKey,
  ogImage,
  structuredData = [],
} = Astro.props as Props;

const locale = Astro.locals?.locale ?? 'en';
const title = t(titleKey, undefined, { locale });
const description = t(descriptionKey, undefined, { locale });
const canonicalUrl = canonicalKey ? t(canonicalKey, undefined, { locale }) : undefined;
---

<BaseLayout
  title={title}
  description={description}
  canonicalUrl={canonicalUrl}
  ogImage={ogImage}
  structuredData={structuredData}
>
  <slot />
</BaseLayout>
